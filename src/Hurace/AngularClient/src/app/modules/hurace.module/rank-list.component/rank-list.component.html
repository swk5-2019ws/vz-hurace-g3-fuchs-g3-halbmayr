<h4>{{ 'rank-list.header' | translate }}</h4>
<spinner *ngIf="rankedSkiersLoading"></spinner>
<div class="table-responsive" *ngIf="!rankedSkiersLoading && !raceLoading">
    <table class="table table-dark rank-list">
        <thead>
            <tr class="dflex">
                <th scope="col" rowspan="2" class="text-center-vertically">{{ 'rank-list.ranks.rankHeader' | translate}}</th>
                <th scope="col" rowspan="2" class="text-center-vertically">{{ 'rank-list.ranks.lastNameHeader' | translate }}</th>
                <th scope="col" rowspan="2" class="text-center-vertically">{{ 'rank-list.ranks.firstNameHeader' | translate }}</th>
                <th scope="col" rowspan="2" class="text-center-vertically">{{ 'rank-list.ranks.startPositionHeader' | translate }}</th>
                <th scope="col" rowspan="2" class="text-center-vertically">{{ 'rank-list.ranks.countryHeader' | translate }}</th>
                <th scope="col" [attr.colspan]="race.numberOfSensors" class="text-center">{{ 'rank-list.ranks.firstRunTimeHeader' | translate }}</th>
                <th scope="col" [attr.colspan]="race.numberOfSensors" class="text-center">{{ 'rank-list.ranks.secondRunTimeHeader' | translate }}</th>
                <th scope="col" rowspan="2" class="text-center-vertically">{{ 'rank-list.ranks.totalTimeHeader' | translate }}</th>
            </tr>
            <tr>
                <th scope="col" class="text-center" *ngFor="let sensorId of generateSequence(race.numberOfSensors)">{{ 'rank-list.ranks.interimTimeFormat' | translate:{ sensorId: sensorId } }}</th>
                <th scope="col" class="text-center" *ngFor="let sensorId of generateSequence(race.numberOfSensors)">{{ 'rank-list.ranks.interimTimeFormat' | translate:{ sensorId: sensorId } }}</th>
            </tr>
        </thead>
        <tbody *ngFor="let rs of rankedSkiers" class="rank-list-body">
            <tr>
                <td rowspan="2" class="text-center-vertically">{{ rs.rank }}</td>
                <td rowspan="2" class="text-center-vertically">{{ rs.lastName }}</td>
                <td rowspan="2" class="text-center-vertically">{{ rs.firstName }}</td>
                <td rowspan="2" class="text-center-vertically">n/a</td>
                <td rowspan="2" class="text-center-vertically">{{ rs.country.reference.name }}</td>

                <td [attr.colspan]="race.numberOfSensors" class="text-center faster-time" *ngIf="rs.elapsedTimeInFirstRunString.length > 0 && rs.elapsedTimeInFirstRunString.charAt(0) === '-'">{{ rs.elapsedTimeInFirstRunString }}</td>
                <td [attr.colspan]="race.numberOfSensors" class="text-center slower-time" *ngIf="rs.elapsedTimeInFirstRunString.length > 0 && rs.elapsedTimeInFirstRunString.charAt(0) === '+'">{{ rs.elapsedTimeInFirstRunString }}</td>
                <td [attr.colspan]="race.numberOfSensors" class="text-center" *ngIf="rs.elapsedTimeInFirstRunString.length > 0 && rs.elapsedTimeInFirstRunString.charAt(0) !== '-' && rs.elapsedTimeInFirstRunString.charAt(0) !== '+'">{{ rs.elapsedTimeInFirstRunString }}</td>
                
                <td [attr.colspan]="race.numberOfSensors" class="text-center faster-time" *ngIf="rs.elapsedTimeInSecondRunString.length > 0 && rs.elapsedTimeInSecondRunString.charAt(0) === '-'">{{ rs.elapsedTimeInSecondRunString }}</td>
                <td [attr.colspan]="race.numberOfSensors" class="text-center slower-time" *ngIf="rs.elapsedTimeInSecondRunString.length > 0 && rs.elapsedTimeInSecondRunString.charAt(0) === '+'">{{ rs.elapsedTimeInSecondRunString }}</td>
                <td [attr.colspan]="race.numberOfSensors" class="text-center" *ngIf="rs.elapsedTimeInSecondRunString.length > 0 && rs.elapsedTimeInSecondRunString.charAt(0) !== '-' && rs.elapsedTimeInSecondRunString.charAt(0) !== '+'">{{ rs.elapsedTimeInSecondRunString }}</td>
                
                <td rowspan="2" class="text-center-vertically">{{ rs.elapsedTotalTimeString }}</td>
            </tr>
            <tr>
                <ng-container *ngFor="let ms of rs.elapsedMeasurementStringsInFirstRun">
                    <td class="text-center" class="text-center faster-time" *ngIf="ms.charAt(0) === '-'">{{ ms }}</td>
                    <td class="text-center" class="text-center slower-time" *ngIf="ms.charAt(0) === '+'">{{ ms }}</td>
                    <td class="text-center" class="text-center" *ngIf="ms.charAt(0) !== '-' && ms.charAt(0) !== '+'">{{ ms }}</td>
                </ng-container>

                <ng-container *ngFor="let ms of rs.elapsedMeasurementStringsInSecondRun">
                    <td class="text-center" class="text-center faster-time" *ngIf="ms.charAt(0) === '-'">{{ ms }}</td>
                    <td class="text-center" class="text-center slower-time" *ngIf="ms.charAt(0) === '+'">{{ ms }}</td>
                    <td class="text-center" class="text-center" *ngIf="ms.charAt(0) !== '-' && ms.charAt(0) !== '+'">{{ ms }}</td>
                </ng-container>
            </tr>
        </tbody>
    </table>
</div>